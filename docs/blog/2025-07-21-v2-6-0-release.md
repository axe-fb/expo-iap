---
slug: v2-6-0-release
title: expo-iap v2.6.0 - Major iOS Improvements
authors: [hyochan]
tags: [release, ios, typescript, breaking-changes]
date: 2025-07-21
---

import AdFitTopFixed from "@site/src/uis/AdFitTopFixed";

# expo-iap v2.6.0 - Major iOS Improvements

<AdFitTopFixed />

We're excited to announce the release of expo-iap v2.6.0! This release brings significant improvements to iOS functionality, better TypeScript support, and enhanced developer experience.

## üéâ What's New

### 1. Proper iOS Subscription Data Serialization

The biggest improvement in this release is the proper serialization of iOS subscription data. Previously, the `subscription` field would return undefined for subscription products. Now, all subscription information is properly serialized and accessible.

#### Before (v2.5.x)
```typescript
const subscriptions = await getSubscriptions(['com.example.premium']);
console.log(subscriptions[0].subscription); // undefined üò¢
```

#### After (v2.6.0)
```typescript
const subscriptions = await getSubscriptions(['com.example.premium']);
console.log(subscriptions[0].subscription); // ‚úÖ Full subscription data!
```

### 2. Improved Type Structure

We've restructured how period information is returned to be more consistent and useful:

```typescript
// New structure
subscription: {
  subscriptionPeriod: {
    unit: 'MONTH',  // 'DAY' | 'WEEK' | 'MONTH' | 'YEAR'
    value: 1        // number of units
  },
  introductoryOffer: {
    period: {
      unit: 'DAY',
      value: 7
    },
    // ... other offer details
  }
}
```

### 3. New getStorefront() API

Get the user's App Store country code:

```typescript
import { getStorefront } from 'expo-iap';

const countryCode = await getStorefront();
console.log('User storefront:', countryCode); // 'US', 'GB', 'JP', etc.
```

### 4. AppTransaction Support (iOS 16.0+)

For premium apps or apps that were previously paid, you can now verify the initial app purchase:

```typescript
import { getAppTransaction } from 'expo-iap';

const appTransaction = await getAppTransaction();
if (appTransaction) {
  console.log('App Transaction ID:', appTransaction.appTransactionID);
  console.log('Purchase Date:', new Date(appTransaction.originalPurchaseDate));
  // Send deviceVerification to your server for validation
}
```

### 5. Comprehensive iOS Subscription Offers Documentation

We've added extensive documentation for handling iOS subscription offers:
- Understanding introductory and promotional offers
- Checking user eligibility
- Implementing offer UI
- Best practices and troubleshooting

Check out the new [iOS Subscription Offers Guide](/docs/guides/ios-subscription-offers).

## ‚ö†Ô∏è Breaking Changes

### Optional Subscription Field

The `subscription` field in `ProductIos` is now optional to reflect that not all iOS products have subscription information:

```typescript
// Before
type ProductIos = {
  subscription: SubscriptionInfo; // Always required
}

// After
type ProductIos = {
  subscription?: SubscriptionInfo; // Optional - only present for subscriptions
}
```

**Migration:** Update your code to handle the optional subscription field:

```typescript
// Check if product is a subscription
if (product.subscription) {
  // Handle subscription-specific logic
  console.log('Period:', product.subscription.subscriptionPeriod);
}
```

## üêõ Bug Fixes

- Fixed iOS subscription data not being properly serialized
- Fixed period information returning raw values instead of structured data
- Improved error handling for platform-specific methods

## üìö Documentation Updates

- Added iOS Subscription Offers guide
- Updated type definitions documentation
- Added examples for new APIs
- Improved troubleshooting section

## üôè Acknowledgments

Special thanks to:
- [@Navipro70](https://github.com/Navipro70) for identifying the subscription serialization issue and providing valuable feedback
- [@matthieuMay](https://github.com/matthieuMay) for the initial iOS type improvements
- All contributors who helped test and improve this release

## üì¶ Installation

Update to the latest version:

```bash
npm install expo-iap@2.6.0
# or
yarn add expo-iap@2.6.0
```

## üîó Links

- [Full Changelog](https://github.com/hyochan/expo-iap/releases/tag/v2.6.0)
- [iOS Subscription Offers Guide](/docs/guides/ios-subscription-offers)
- [API Reference](/docs/api/methods/core-methods)

## What's Next?

We're working on:
- Android subscription offers improvements
- Better error messages and debugging tools
- Performance optimizations
- More comprehensive examples

Stay tuned for more updates! If you have any feedback or suggestions, please [open an issue](https://github.com/hyochan/expo-iap/issues).

Happy coding! üöÄ